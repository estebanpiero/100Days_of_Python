{% extends "base.html" %}

{% block title %}My Graphs - Pixela Habit Tracker{% endblock %}

{% block content %}
<div class="page-header">
    <h2>My Habit Tracking Graphs</h2>
    <p>Manage your habit tracking graphs and activities</p>
</div>

{% if graphs %}
    <div class="graphs-grid">
        {% for graph in graphs %}
            <div class="graph-card">
                <div class="graph-header">
                    <h3>{{ graph.name }}</h3>
                    <span class="graph-badge" style="background-color:
                        {% if graph.color == 'shibafu' %}#28a745
                        {% elif graph.color == 'momiji' %}#dc3545
                        {% elif graph.color == 'sora' %}#007bff
                        {% elif graph.color == 'ichou' %}#ffc107
                        {% elif graph.color == 'ajisai' %}#6f42c1
                        {% elif graph.color == 'kuro' %}#343a40
                        {% else %}#6c757d{% endif %}">
                        {{ graph.color }}
                    </span>
                </div>

                <div class="graph-info">
                    <p><strong>ID:</strong> {{ graph.id }}</p>
                    <p><strong>Unit:</strong> {{ graph.unit }}</p>
                    <p><strong>Type:</strong> {{ graph.type }}</p>
                </div>

                <div class="graph-preview">
                    <iframe src="{{ graph.view_url }}" width="100%" height="150" frameborder="0"></iframe>
                </div>

                <div class="graph-actions">
                    <a href="{{ graph.view_url }}" target="_blank" class="btn btn-secondary">View Full Graph</a>
                    <a href="{{ url_for('manage_activity', graph_id=graph.id) }}" class="btn btn-primary">Add Activity</a>
                    <a href="{{ url_for('update_graph_route', graph_id=graph.id) }}" class="btn btn-info">Edit</a>
                    <form method="POST" action="{{ url_for('delete_graph_route', graph_id=graph.id) }}" style="display: inline;" onsubmit="return confirm('Are you sure you want to delete this graph?');">
                        <button type="submit" class="btn btn-danger">Delete</button>
                    </form>
                </div>
            </div>
        {% endfor %}
    </div>
{% else %}
    <div class="empty-state">
        <h3>No graphs yet!</h3>
        <p>Create your first habit tracking graph to get started.</p>
        <a href="{{ url_for('create_graph_route') }}" class="btn btn-primary btn-large">Create Your First Graph</a>
    </div>
{% endif %}
{% endblock %}
